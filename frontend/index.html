<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Sequence-Filter</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <!-- Fuentes & estilos -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <!-- Usa un favicon local para no golpear "/" del host -->
  <link rel="icon" href="assets/img/favicon.ico">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="styles.css">

  <!-- Evita que proxies intermedios cacheen HTML -->
  <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate, max-age=0">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
</head>
<body>

<main class="sf-wrapper">
  <header class="sf-header">
    <div class="sf-brand">
      <span class="sf-logo-badge">
        <img class="sf-logo" src="assets/img/sequence-filter-logo.png" alt="Logo Sequence Filter" loading="lazy">
      </span>
      <div class="sf-brand-text">
        <h1>Sequence-Filter</h1>
        <p>Tu buscador de secuencias</p>
      </div>
    </div>
    <button type="button" class="sf-help" id="helpBtn" title="Ayuda" aria-haspopup="dialog" aria-controls="myModal">
      <i class="fa fa-question" aria-hidden="true"></i>
    </button>
  </header>

  <section class="sf-content">
    <div class="sf-card sf-left">
      <h3>Opciones de búsqueda</h3>

      <form>
        <label class="sf-label" for="inputTextSequence">Ingrese una secuencia:</label>
        <input type="text" class="sf-input" id="inputTextSequence" placeholder="SECUENCIA A BUSCAR" style="text-transform:uppercase">

        <div class="sf-grid">
          <div class="sf-field"><label for="minCharge">Carga min:</label><input type="number" class="sf-input" id="minCharge"></div>
          <div class="sf-field"><label for="maxCharge">Carga máx:</label><input type="number" class="sf-input" id="maxCharge"></div>

          <div class="sf-field"><label for="minIsoelectric">Isoeléctrico min:</label><input type="number" class="sf-input" id="minIsoelectric" step=".1"></div>
          <div class="sf-field"><label for="maxIsoelectric">Isoeléctrico máx:</label><input type="number" class="sf-input" id="maxIsoelectric" step=".1"></div>

          <div class="sf-field"><label for="minHidrofobic">% Hidrofóbico min:</label><input type="number" class="sf-input" id="minHidrofobic" step="any"></div>
          <div class="sf-field"><label for="maxHidrofobic">% Hidrofóbico máx:</label><input type="number" class="sf-input" id="maxHidrofobic" step="any"></div>

          <div class="sf-field"><label for="minBoman">Boman min:</label><input type="number" class="sf-input" id="minBoman" step=".01"></div>
          <div class="sf-field"><label for="maxBoman">Boman máx:</label><input type="number" class="sf-input" id="maxBoman" step=".01"></div>

          <div class="sf-field"><label for="minMoment">Momento Hidrofóbico Relativo min:</label><input type="number" class="sf-input" id="minMoment" step=".01"></div>
          <div class="sf-field"><label for="maxMoment">Momento Hidrofóbico Relativo máx:</label><input type="number" class="sf-input" id="maxMoment" step=".01"></div>
        </div>

        <label class="sf-label" for="inputTextIgnoreSequence">Ignorar secuencia</label>
        <input type="text" class="sf-input" id="inputTextIgnoreSequence" placeholder="AA..." style="text-transform:uppercase">

        <div class="sf-actions">
          <button type="button" id="findButton" class="sf-btn">Buscar</button>
        </div>
      </form>
    </div>

    <div class="sf-card sf-right">
      <h3>Resultados</h3>
      <div class="sf-stats">
        <p><strong>Estadísticas de búsqueda:</strong></p>
        <p>Péptidos que cumplen el criterio de búsqueda: <span id="searchNumber">0</span></p>
        <p>Porcentaje de péptidos seleccionados con respecto al total de datos: <span id="searchPercentage">0</span>%</p>
        <p>Los aminoácidos más comunes y su porcentaje con respecto al total son: <span id="aminoPercentage">—</span></p>
      </div>

      <div class="sf-table-head">
        <h4>Secuencias encontradas:</h4>
        <div class="sf-downloads">
          <button type="button" id="downloadCsv" class="sf-btn ghost">Descargar CSV</button>
          <button type="button" id="downloadFasta" class="sf-btn ghost">Descargar Fasta</button>
        </div>
      </div>

      <div class="sf-table-wrap" tabindex="0" aria-label="Tabla de resultados desplazable">
        <table id="archivoInfoTable" class="sf-table">
          <thead><tr><th>Título</th><th>Secuencia</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
  </section>
</main>

<!-- Modal Ayuda -->
<div id="myModal" class="modal" role="dialog" aria-labelledby="fsHelpTitle" aria-modal="true" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content fs-modal">
      <div class="fs-modal__header">
        <h4 id="fsHelpTitle" class="modal-title">Filter Sequence — Ayuda</h4>
        <button type="button" class="close" aria-label="Cerrar"><span aria-hidden="true">&times;</span></button>
      </div>
      <div class="fs-modal__body">
        <p><strong>Filter Sequence</strong> permite buscar y filtrar péptidos por patrón de secuencia y por propiedades fisicoquímicas.</p>
      </div>
    </div>
  </div>
</div>

<!-- Overlay de Carga (fuera de contenedores; siempre al final del body) -->
<div id="loadingOverlay" class="sf-loading" aria-live="polite" aria-busy="true">
  <div class="sf-loading__box" role="status" aria-label="Cargando">
    <div class="sf-loading__spinner" aria-hidden="true"></div>
    <div class="sf-loading__text">Cargando…</div>
  </div>
</div>

<!-- Scripts (defer para cargar tras el HTML) -->
<script src="modal.js?v=dev" defer></script>
<script src="bioutils.js?v=dev" defer></script>
<script src="app.js?v=dev" defer></script>
</body>
</html>
